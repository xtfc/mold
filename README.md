# Mold

A fresh (ironic? maybe) approach to project task management.

## Why

Apparently terminals are going through some sort of modern renaissance where
old, antiquated tools are being replaced with hip, fresh tools. I'm hopping on
the bandwagon.

See:

* [BurntSushi/ripgrep](https://github.com/BurntSushi/ripgrep)
* [jakubroztocil/httpie](https://github.com/jakubroztocil/httpie)
* [ogham/exa](https://github.com/ogham/exa)
* [sharkdp/bat](https://github.com/sharkdp/bat)
* [sharkdp/fd](https://github.com/sharkdp/fd)
* [scizzorz/milk](https://github.com/scizzorz/milk)

Non-trivial projects have tons of little tasks that need to be run from time to
time: compiling, installation, building Docker images, linting /
autoformatting, tests, publishing to a package index, etc. Most languages or
frameworks will have their own specific tool to manage *some* of these tasks,
but if you have a multi-piece project, it's likely that you'll end up
memorizing arcane incantations to run your tests. And then you'll get tired of
remembering them and put them in shell scripts. And then you'll get tired of
organizing shell scripts so you'll put them in a good ol' `Makefile`.

It's all fine and dandy until you realize that Make is a hot pile of mom's
spaghetti. It was designed for describing compilation chains, so using it as a
task runner / organization scheme is somewhat clunky. The syntax is inspired by
shell, so it's got a bunch of bizarre quirks that show up infrequently enough
that I never remember how to fix them. Wildcard syntax and automatic variables
are super terse and hard to memorize. There's no immediately obvious way to
pass arguments through to Make recipes. `Makefile`s require hard tabs. There is
no autogenerated help system. Some recipes are built-in, which can lead to
confusion when you write your recipe slightly wrong and don't realize that Make
is invoking the built-in rather than your own. [TODO: find more baddies]

My dream is that Mold will grow into a task runner with understandable,
consistent, and predictable behavior and syntax. I want to support projects
that have multiple subsystems, various scripting languages, and/or a multitude
of magic spells that need to be organized in a nice, happy way.

## Design

I haven't given this part much thought, but one thing I'd really like is to
support single-file configurations a la `Makefile`s *and* support some sort of
directory structure as a project grows larger and tasks need to be subdivided
or categorized further.

Network includes seem like a great idea for composition and reusability. For
example, if you're starting a new Python project with `pipenv`, being able to
reference some public-ish cookiecutter set of Mold tasks would be phenomenal. I
suspect any network recipes will need to be significantly parametrized in order
to be useful.

Supporting multiple languages and tools is essential. I want to be able to
write some tasks in Python (or any language) without having to create dummy
tasks that just call `python myscript.py`. Something like shebang lines would
be great for this.

Dependency description is important but I don't have any ideas for it.

File syntax is something that needs to be done very carefully. Make's syntax is
one of my biggest gripes, but it *is* very powerful. I was originally planning
to adopt some standardized format like TOML or YAML, but I think they may be
difficult to work with because the scripts will likely just be multi-line
strings or lists of strings. This prevents editors from operating effectively
on the script itself. I'm now leaning more towards a simple DSL with a header
section followed by a code section, but I could be persuaded otherwise. Maybe
using TOML/YAML with a reference to an external file could work... who knows.

Anyway, it's all up in the air and I don't have a really solid grasp of what I
want or how to implement it. Drop a comment if you have any suggestions or
ideas.
